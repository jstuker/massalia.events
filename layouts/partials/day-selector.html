{{/* 7-day navigation selector with French day names */}}
{{/* Usage: {{ partial "day-selector.html" . }} */}}

{{/* French day name mappings (0=Sunday through 6=Saturday) */}}
{{ $frenchDays := dict
    "0" "Dim"
    "1" "Lun"
    "2" "Mar"
    "3" "Mer"
    "4" "Jeu"
    "5" "Ven"
    "6" "Sam"
}}

{{ $frenchDaysFull := dict
    "0" "Dimanche"
    "1" "Lundi"
    "2" "Mardi"
    "3" "Mercredi"
    "4" "Jeudi"
    "5" "Vendredi"
    "6" "Samedi"
}}

{{/* French 3-letter month abbreviations (1-12) */}}
{{ $frenchMonths := dict
    "1" "jan"
    "2" "fév"
    "3" "mar"
    "4" "avr"
    "5" "mai"
    "6" "juin"
    "7" "juil"
    "8" "août"
    "9" "sep"
    "10" "oct"
    "11" "nov"
    "12" "déc"
}}

{{ $today := now }}

<nav class="day-selector my-6" role="tablist" aria-label="Sélecteur de jour">
  <div class="flex overflow-x-auto gap-1 sm:gap-2 pb-2 scrollbar-hide">
    {{ range $i := seq 0 6 }}
      {{ $date := $today.AddDate 0 0 $i }}
      {{ $dayNum := $date.Weekday | int | string }}
      {{ $monthNum := $date.Month | int | string }}
      {{ $dayName := index $frenchDays $dayNum }}
      {{ $dayNameFull := index $frenchDaysFull $dayNum }}
      {{ $monthName := index $frenchMonths $monthNum }}
      {{ $dateStr := $date.Format "2006-01-02" }}
      {{ $dayOfMonth := $date.Day }}

      {{ $isToday := eq $i 0 }}
      {{ $activeClass := "bg-primary-500 text-white shadow-md" }}
      {{ $inactiveClass := "bg-neutral-100 text-neutral-700 hover:bg-neutral-200 dark:bg-neutral-800 dark:text-neutral-300 dark:hover:bg-neutral-700" }}

      <button
        type="button"
        role="tab"
        tabindex="{{ if $isToday }}0{{ else }}-1{{ end }}"
        aria-selected="{{ if $isToday }}true{{ else }}false{{ end }}"
        aria-label="{{ if $isToday }}Aujourd'hui{{ else }}{{ $dayNameFull }}{{ end }}, {{ $dayOfMonth }} {{ $monthName }}"
        data-date="{{ $dateStr }}"
        data-day-index="{{ $i }}"
        class="day-tab flex-shrink-0 px-3 py-2 sm:px-4 sm:py-3 rounded-lg text-center cursor-pointer transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-neutral-900 {{ if $isToday }}{{ $activeClass }}{{ else }}{{ $inactiveClass }}{{ end }}"
        {{ if $isToday }}data-active="true"{{ end }}
      >
        <span class="block text-xs sm:text-sm font-semibold whitespace-nowrap">
          {{ if $isToday }}
            Aujourd'hui
          {{ else }}
            {{ $dayName }}
          {{ end }}
        </span>
        <span class="block text-xs sm:text-sm mt-0.5 whitespace-nowrap {{ if $isToday }}opacity-90{{ else }}opacity-70{{ end }}">
          {{ $dayOfMonth }} {{ $monthName }}
        </span>
      </button>
    {{ end }}
  </div>
</nav>

{{/* Hide scrollbar but allow scrolling */}}
<style>
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.scrollbar-hide::-webkit-scrollbar {
  display: none;
}
</style>

{{ $jsDaySelector := resources.Get "js/day-selector.js" | resources.Minify | resources.Fingerprint (site.Params.fingerprintAlgorithm | default "sha512") }}
<script
  defer
  type="text/javascript"
  src="{{ $jsDaySelector.RelPermalink }}"
  integrity="{{ $jsDaySelector.Data.Integrity }}"></script>
