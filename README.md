# massalia.events

A cultural events aggregator for Marseille, featuring events in arts, music, dance, and theatre.

## Overview

massalia.events is a static website that aggregates cultural events from multiple sources in Marseille. The site is built with Hugo and automatically updated through a local crawler that fetches events from configured sources.

**Key Features:**
- Aggregates events from multiple cultural venues and platforms
- Automatic categorization (danse, musique, theatre, art, communaute)
- Location-based filtering (Marseille area)
- Multi-day event support
- Optimized images in WebP format
- French language support

## Project Structure

```
massalia.events/
├── content/
│   └── events/              # Event markdown files (generated by crawler)
│       └── 2026/01/27/      # Date-based folder structure
├── crawler/                 # Python crawler application
│   ├── crawl.py            # Main CLI entry point
│   ├── config.yaml         # Main configuration
│   ├── config/             # Source and criteria configuration
│   └── src/                # Crawler source code
├── docs/                   # Documentation
│   ├── WORKFLOW.md         # Publishing workflow guide
│   └── TROUBLESHOOTING.md  # Common issues and solutions
├── layouts/                # Hugo templates
├── static/
│   └── images/events/      # Event images (generated by crawler)
├── specifications/         # Product specifications
└── hugo.toml              # Hugo configuration
```

## Quick Start

### Prerequisites

- Python 3.11+
- Hugo (extended version)
- Git

### Setup

```bash
# Clone repository
git clone https://github.com/jstuker/massalia.events.git
cd massalia.events

# Set up crawler
cd crawler
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

### Run Crawler

```bash
# Preview mode (recommended first)
python crawl.py run --dry-run

# Execute crawl
python crawl.py run
```

### Preview Site

```bash
cd ..
hugo server
# Visit http://localhost:1313
```

### Publish

```bash
git add -A
git commit -m "Add events from crawl"
git push origin main
```

## Documentation

| Document | Description |
|----------|-------------|
| [Publishing Workflow](docs/WORKFLOW.md) | Step-by-step guide for daily operations |
| [Troubleshooting](docs/TROUBLESHOOTING.md) | Common issues and solutions |
| [Crawler Documentation](crawler/README.md) | Detailed crawler usage and configuration |
| [Product Specification](specifications/Product%20specification%20v1.md) | Project requirements and design |

## Daily Operations

See the [Publishing Workflow](docs/WORKFLOW.md) for detailed instructions.

**Quick checklist:**
1. `git pull origin main`
2. `cd crawler && source venv/bin/activate`
3. `python crawl.py run --dry-run` (preview)
4. `python crawl.py run` (execute)
5. `cd .. && git add -A && git commit -m "Add events"`
6. `git push origin main`

## Event Categories

| Category | French Label | Description |
|----------|--------------|-------------|
| danse | Danse | Dance performances and shows |
| musique | Musique | Concerts and music events |
| theatre | Théâtre | Theatre and performing arts |
| art | Art | Exhibitions and visual arts |
| communaute | Communauté | Community events and workshops |

## Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Run tests: `cd crawler && pytest`
5. Submit a pull request

See [Crawler README](crawler/README.md#adding-new-parsers) for adding new event sources.

## Technology Stack

- **Static Site Generator:** Hugo
- **Crawler:** Python 3.11+
- **Hosting:** GitHub Pages
- **CI/CD:** GitHub Actions

## License

Part of the Massalia Events project.
